From 0560560a2bfbaf3b86a477ac8380d8b1445ab666 Mon Sep 17 00:00:00 2001
From: uib15788 <hong.2.yang@continental-corporation.com>
Date: Tue, 21 Mar 2023 17:56:33 +0800
Subject: [PATCH 1/1] disable unused node and change some clk

Signed-off-by: uib15788 <hong.2.yang@continental-corporation.com>
---
 fdts/s32cc-nxp-flash-macronix.dtsi |  2 +-
 fdts/s32cc.dtsi                    |  2 +-
 fdts/s32g.dtsi                     | 10 +++++-----
 fdts/s32g3.dtsi                    |  4 ++--
 fdts/s32g3xxa-evb.dts              |  9 ++++++---
 fdts/s32gxxxa-evb.dtsi             | 17 +++++++++--------
 6 files changed, 24 insertions(+), 20 deletions(-)
 mode change 100644 => 100755 fdts/s32cc-nxp-flash-macronix.dtsi
 mode change 100644 => 100755 fdts/s32g.dtsi
 mode change 100644 => 100755 fdts/s32g3.dtsi
 mode change 100644 => 100755 fdts/s32g3xxa-evb.dts
 mode change 100644 => 100755 fdts/s32gxxxa-evb.dtsi

diff --git a/fdts/s32cc-nxp-flash-macronix.dtsi b/fdts/s32cc-nxp-flash-macronix.dtsi
old mode 100644
new mode 100755
index 4b5a66e..a9a61c8
--- a/fdts/s32cc-nxp-flash-macronix.dtsi
+++ b/fdts/s32cc-nxp-flash-macronix.dtsi
@@ -6,7 +6,7 @@
 &qspi {
 	macronix_memory: mx25uw51245g@0 {
 		compatible = "jedec,spi-nor";
-		spi-max-frequency = <200000000>;
+		spi-max-frequency = <133333333>;
 		spi-tx-bus-width = <8>;
 		spi-rx-bus-width = <8>;
 		reg = <0>;
diff --git a/fdts/s32cc.dtsi b/fdts/s32cc.dtsi
index f07e92e..162db48 100644
--- a/fdts/s32cc.dtsi
+++ b/fdts/s32cc.dtsi
@@ -452,7 +452,7 @@
 				<&plat_clks S32GEN1_CLK_FXOSC>;
 			assigned-clock-rates =
 				<0>,
-				<S32GEN1_PERIPH_PLL_VCO_FREQ>, <100000000>,
+				<S32GEN1_PERIPH_PLL_VCO_FREQ>, <125000000>,
 				<80000000>, <80000000>,
 				<125000000>, <200000000>,
 				<125000000>, <100000000>;
diff --git a/fdts/s32g.dtsi b/fdts/s32g.dtsi
old mode 100644
new mode 100755
index 61290cb..a98b348
--- a/fdts/s32g.dtsi
+++ b/fdts/s32g.dtsi
@@ -110,7 +110,7 @@
 				gpio-ranges = <&pinctrl 0   0   102>,
 					/* GPIO 112-190 */
 					      <&pinctrl 112 112 79>;
-				status = "okay";
+				status = "disabled";
 			};

 			siul2_0_nvram: siul2_0_nvram {
@@ -290,7 +290,7 @@
 		<0>, <0>, <0>, <0>,
 		<0>, <0>, <0>, <0>,
 		<0>, <0>, <0>, <0>,
-		<100000000>;
+		<125000000>;
 };

 &accelpll {
@@ -316,7 +316,7 @@

 &qspi {
 	compatible = "nxp,s32g-qspi", "nxp,s32cc-qspi";
-	status = "okay";
+	status = "disabled";
 };

 &usdhc0 {
@@ -324,13 +324,13 @@
 };

 &pcie0 {
-	status = "okay";
+	status = "disabled";

 	link-speed = <3>; /* Gen3 */
 };

 &pcie1 {
-	status = "okay";
+	status = "disabled";

 	link-speed = <2>; /* Gen2 */
 };
diff --git a/fdts/s32g3.dtsi b/fdts/s32g3.dtsi
old mode 100644
new mode 100755
index dedebcb..81f33ca
--- a/fdts/s32g3.dtsi
+++ b/fdts/s32g3.dtsi
@@ -174,12 +174,12 @@
 		<0>,
 		<80000000>,
 		<0>,
-		<40000000>,
+		<1000000>,
 		<40000000>,
 		<80000000>,
 		<125000000>,
 		<100000000>,
-		<400000000>,
+		<266666666>,
 		<400000000>;

 	clocks = <&plat_clks S32GEN1_CLK_XBAR_2X>,
diff --git a/fdts/s32g3xxa-evb.dts b/fdts/s32g3xxa-evb.dts
old mode 100644
new mode 100755
index a285252..7e6f679
--- a/fdts/s32g3xxa-evb.dts
+++ b/fdts/s32g3xxa-evb.dts
@@ -13,13 +13,16 @@
 };

 &usdhc0 {
-	no-1-8-v;
+	status = "okay";
+	/delete-property/ mmc-ddr-1_8v;
+	non-removable;
+	fixed-emmc-driver-type = <4>;
 };

 &usbotg {
-	status = "okay";
+	status = "disabled";
 };

 &wkpu {
-	status = "okay";
+	status = "disabled";
 };
diff --git a/fdts/s32gxxxa-evb.dtsi b/fdts/s32gxxxa-evb.dtsi
old mode 100644
new mode 100755
index c3d9bc4..5d8c68e
--- a/fdts/s32gxxxa-evb.dtsi
+++ b/fdts/s32gxxxa-evb.dtsi
@@ -40,13 +40,13 @@
 &spi1 {
 	pinctrl-0 = <&dspi1_pins>;
 	pinctrl-names = "default";
-	status = "okay";
+	status = "disabled";
 };

 &spi5 {
 	pinctrl-0 = <&dspi5_pins>;
 	pinctrl-names = "default";
-	status = "okay";
+	status = "disabled";

 	ethernet-switch@0 {
 		compatible = "nxp,sja1105-s32gevb-fw-loader";
@@ -63,7 +63,7 @@
 };

 &usbotg {
-	status = "okay";
+	status = "disabled";
 };

 &gmac0_mdio {
@@ -88,7 +88,7 @@
 };

 &pfe {
-	status = "okay";
+	status = "disabled";
 };

 /* EEPROM */
@@ -99,7 +99,7 @@
 	pinctrl-1 = <&i2c0_gpio_pins>;
 	scl-gpios = <&gpio 17 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
 	sda-gpios = <&gpio 16 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
-	status = "okay";
+	status = "disabled";
 };

 /* Platform board PCI X16 EXPRESS - I2C_SCL_S0, I2C_SDA_S0  */
@@ -110,7 +110,7 @@
 	pinctrl-1 = <&i2c1_gpio_pins>;
 	scl-gpios = <&gpio 19 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
 	sda-gpios = <&gpio 20 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
-	status = "okay";
+	status = "disabled";
 };

 /* Platform board GPIO_J3-17 (SDA), GPIO_J3-19 (SCL0)  */
@@ -121,12 +121,12 @@
 	pinctrl-1 = <&i2c2_gpio_pins>;
 	scl-gpios = <&gpio 21 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
 	sda-gpios = <&gpio 22 (GPIO_ACTIVE_HIGH | GPIO_OPEN_DRAIN)>;
-	status = "okay";
+	status = "disabled";
 };

 /* PMIC */
 &i2c4 {
-	status = "okay";
+	status = "disabled";
 	pinctrl-names = "default", "gpio";
 	pinctrl-0 = <&i2c4_pins>;
 	pinctrl-1 = <&i2c4_gpio_pins>;
@@ -461,6 +461,7 @@
 &qspi {
 	pinctrl-0 = <&qspi_pins>;
 	pinctrl-names = "default";
+	status = "disabled";
 };

 &uart0 {
--
2.35.1
